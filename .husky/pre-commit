#!/bin/sh
# Auto-bump patch version on every commit

# Get current version from package.json
CURRENT_VERSION=$(node -p "require('./package.json').version")

# Bump patch version (0.2.1 -> 0.2.2)
npm version patch --no-git-tag-version --no-commit-hooks

# Get new version
NEW_VERSION=$(node -p "require('./package.json').version")

# Add the updated package.json to the commit
git add package.json package-lock.json 2>/dev/null

echo "Version bumped: $CURRENT_VERSION -> $NEW_VERSION"